---
layout: post
status: publish
published: true
title: 'Magento: métodos factoría para logging y modo de desarrollo'
author:
  display_name: Mario Alberich
  login: admin
  email: malberich@gmail.com
  url: ''
author_login: admin
author_email: malberich@gmail.com
wordpress_id: 27508
wordpress_url: http://www.sopadebits.com/?p=27508
date: '2013-11-28 14:00:33 +0100'
date_gmt: '2013-11-28 13:00:33 +0100'
categories:
- Informática
tags:
- magento
comments: []
---
<h2>Logging y reportado de excepciones</h2><br />
Como en todas las aplicaciones del mismo nivel, Magento integra métodos para generar logs, tanto textuales como de objetos de excepciones.</p><!--more-->
<pre class="brush: php; gutter: true">Mage::log($msg, $level = null, $file = &#039;&#039;, $forceLog = false)</pre><br />
El método log es de largo el más utilizado de todos. El funcionamiento es sencillo y más que suficiente la mayoría de las veces, porque permite:</p>
<ul>
<li>Definir el nivel del mensaje con $level (puedes utilizar las constantes LOG_DEBUG, LOG_INFO, LOG_ERR).</li>
<li>Establecer un archivo específico para ese log (en caso contrario, se utiliza system.log, o el archivo indicado en la configuración, en el apartado "Developer").</li>
<li>Forzar la generación del log aunque los logs estén desactivados y no estemos en <em>Developer Mode</em>.</li><br />
</ul><br />
Para la gestión de las excepciones tenemos tres aproximaciones distintas:</p>
<ul>
<li><strong>Mage::logException</strong> envía la excepción a un archivo de log (exception.log por defecto pero puede modificarse el archivo desde la configuración de Magento).</li>
<li><strong>Mage::printException</strong>&nbsp;Si estamos en modo desarrollador, imprime la excepción por pantalla. En caso contrario, genera un archivo de report en el directorio de Magento /var/reports, mientras muestra en pantalla el mensaje con el código de report.</li>
<li><strong>Mage::throwException</strong>&nbsp;lanza la excepción (ejecuta <em>throw</em>) y delega el efecto de la operación en el resto de PHP. También es posible guardar el mensaje en un <em>messageStorage</em>, para poderlo mostrar en el frontend.</li><br />
</ul></p>
<h2>Modo desarrollo</h2><br />
Ejecutar Magento en modo desarrollo permite detectar fragmentos de código que técnicamente puedan ser correctos (es decir, funcionan), pero que pueden ser proclives a provocar errores. Tienes una buena explicación del origen y los motivos de esta funcionalidad en el <a href="http://alanstorm.com/magento_exception_handling_developer_mode">artículo de Alan Storm sobre la gestión del&nbsp;<em>developer mode</em>.</a></p>
<p>Para el caso, el argumento&nbsp;<em>mode</em> es un valor booleano (o equivalente: 0 y 1 también son válidos) para definir si la aplicación se ejecutará en modo desarrollador o no.</p>
<ul>
<li>Mage::setIsDeveloperMode($mode)</li>
<li>Mage::getIsDeveloperMode($mode)</li><br />
</ul></p>
